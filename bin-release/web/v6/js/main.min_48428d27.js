var __reflect=this&&this.__reflect||function(e,t,o){e.__class__=t,o?o.push(t):o=[t],e.__types__=e.__types__?o.concat(e.__types__):o},__extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);o.prototype=t.prototype,e.prototype=new o},GameObject=function(){function e(){this.shape=null,this.mask=null,this.destroyFlag=!1,e.objects.push(this)}return e.initial=function(t){e.objects=[],e.display=t},e.update=function(){e.objects.forEach(function(e){return e.updateContent()}),e.objects=e.objects.filter(function(e){return e.destroyFlag&&e["delete"](),!e.destroyFlag}),e.transit&&(e.allDestroy(),e.transit(),e.transit=null)},e.allDestroy=function(){e.objects=e.objects.filter(function(e){return e.destroy(),e["delete"](),!1})},e.prototype.destroy=function(){this.destroyFlag=!0},e.prototype.addDestroyMethod=function(){},e.prototype["delete"]=function(){this.addDestroyMethod(),this.shape&&(e.display.removeChild(this.shape),this.shape=null)},e.objects=[],e}();__reflect(GameObject.prototype,"GameObject");var PhysicsObject=function(e){function t(){var t=e.call(this)||this;return t.body=null,t.bodyShape=null,t}return __extends(t,e),t.prototype.addDestroyMethod=function(){CreateWorld.world.removeBody(this.body)},t.world=null,t}(GameObject);__reflect(PhysicsObject.prototype,"PhysicsObject");var Main=function(e){function t(){var t=e.call(this)||this;return t.once(egret.Event.ADDED_TO_STAGE,t.addToStage,t),t}return __extends(t,e),t.prototype.addToStage=function(){GameObject.initial(this.stage),Util.init(this),Game.init(),egret.startTick(this.tickLoop,this)},t.prototype.tickLoop=function(e){return GameObject.update(),!1},t}(eui.UILayer);__reflect(Main.prototype,"Main");var Game=function(){function e(){}return e.init=function(){this.height=egret.MainContext.instance.stage.stageHeight,this.width=egret.MainContext.instance.stage.stageWidth,new Background,new Kill,new Player(e.width/2,e.height/1.5,e.width/3.4,e.height/8,Util.color(255,0,0)),new Money,new LevelUpBulletDamageButton(e.width/6,e.height/1.1,e.width/4,e.height/10.5,Util.color(255,0,0),"Attack"),new LevelUpBulletSpeedButton(e.width/2,e.height/1.1,e.width/4,e.height/10.5,Util.color(255,0,0),"Speed"),new LevelUpSalaryButton(e.width/1.2,e.height/1.1,e.width/4,e.height/10.5,Util.color(255,0,0),"Salary"),new CheckDate,new GameScene},e}();__reflect(Game.prototype,"Game");var Background=function(e){function t(){var o=e.call(this)||this;return t.I=o,o.shape=new egret.Shape,o.shape.graphics.beginFill(Util.color(0,0,0)),o.shape.graphics.drawRect(0,0,Game.width,Game.height),o.shape.graphics.endFill(),GameObject.display.addChild(o.shape),o}return __extends(t,e),t.prototype.updateContent=function(){},t.I=null,t}(GameObject);__reflect(Background.prototype,"Background");var CreateWorld=function(e){function t(){var o=e.call(this)||this;return t.I=o,t.world.on("beginContact",o.collision,o),o}return __extends(t,e),t.prototype.createWorld=function(){t.world=new p2.World,t.world.sleepMode=p2.World.BODY_SLEEPING,t.world.gravity=[0,9.8]},t.worldBegin=function(e){return t.world.step(1/60,e/1e3,10),!1},t.prototype.collision=function(e){},t.prototype.addDestroyMethod=function(){t.world.clear()},t.prototype.updateContent=function(){},t.I=null,t}(PhysicsObject);__reflect(CreateWorld.prototype,"CreateWorld");var Bullet=function(e){function t(t,o,a,i,r){var n=e.call(this)||this;return n.object=null,n.collisionFlag=!1,n.setObject(t,o,a,i),n.setShape(t,o,a,i,r),n.object.scaleX=.5,n.object.scaleY=.5,n}return __extends(t,e),t.prototype.setObject=function(e,t,o,a){this.object=new egret.DisplayObjectContainer,this.object.anchorOffsetX+=o/2,this.object.x=e,this.object.y=t,this.object.width=o,this.object.height=a,GameObject.display.addChild(this.object)},t.prototype.setShape=function(e,t,o,a,i){this.shape&&GameObject.display.removeChild(this.shape),this.shape=new egret.Shape,this.shape.x=0,this.shape.y=0,this.shape.graphics.beginFill(i),this.shape.graphics.drawRect(0,0,o,a),this.shape.graphics.endFill(),this.object.addChild(this.shape)},t.prototype["delete"]=function(){this.shape&&GameObject.display.removeChild(this.object)},t.prototype.updateContent=function(){},t}(GameObject);__reflect(Bullet.prototype,"Bullet");var CheckDate=function(e){function t(){var o=e.call(this)||this;return o.text=null,o.textColor=16777215,o.s=0,t.I=o,o.getDate(),t.dateTimer=new egret.Timer(t.dateInterval,0),t.dateTimer.addEventListener(egret.TimerEvent.TIMER,o.save,o),t.dateTimer.start(),o}return __extends(t,e),t.prototype.getDate=function(){var e=window.localStorage.getItem("getLastDate");(null==e||void 0==e)&&(e=(new Date).getTime().toString(),window.localStorage.setItem("getLastDate",e));var t=parseInt(e),o=new Date;this.s=(o.getTime()-t)/1e3,this.s=parseInt(this.s.toString()),Money.I.money+=this.s*Player.salary,e=(new Date).getTime().toString(),window.localStorage.setItem("getLastDate",e),t=parseInt(e),this.s=(o.getTime()-t)/1e3,this.s=parseInt(this.s.toString()),this.text=Util.myText(Game.width/1.4,0,"saving...",80,.5,this.textColor,!0),this.text.alpha=0,GameObject.display.addChild(this.text)},t.prototype.save=function(){t.timerCounter+=1,this.salary(),this.autoSaveText()},t.prototype.updateContent=function(){},t.prototype.salary=function(){Money.I.money+=Player.salary,t.timerCounter>=10&&window.localStorage.setItem("money",Money.I.money.toString())},t.prototype.autoSaveText=function(){if(t.timerCounter>=10){var e=(new Date).getTime().toString();window.localStorage.setItem("getLastDate",e),t.timerCounter=0,MyTween.autoSaveTextFadeInOut(this.text)}},t.I=null,t.dateTimer=null,t.dateInterval=1e3,t.timerCounter=0,t}(GameObject);__reflect(CheckDate.prototype,"CheckDate");var DropItem;!function(e){e[e.NONE=0]="NONE",e[e.A=1]="A",e[e.B=2]="B"}(DropItem||(DropItem={}));var Enemy=function(e){function t(t,o,a,i,r,n,s){var l=e.call(this)||this;return l.object=null,l.initialY=0,l.dropMoney=0,l.hp=0,l.hpTextField=null,l.hpTextFieldColor=16711680,l.deadFlag=!1,l.addShapes=[],l.hp=n,l.dropMoney=s,l.setObject(t,o,a,i),l.setHpText(t,o,a,i),l.initialY=l.object.y,l}return __extends(t,e),t.prototype.setObject=function(e,t,o,a){0>=o?(o=1,console.log("widthが0以下です")):0>=a&&(a=1,console.log("heightが0以下です")),this.object=new egret.DisplayObjectContainer,this.object.width=o,this.object.height=a,this.object.anchorOffsetX+=o/2,this.object.anchorOffsetY+=a/2,this.object.x=e,this.object.y=t;var i=GameObject.display.getChildIndex(Background.I.shape)+1;GameObject.display.addChildAt(this.object,i)},t.prototype.setHpText=function(e,t,o,a){var i=100,r=.5;this.hpTextField=Util.myText(0,0,this.hp.toString(),i,r,this.hpTextFieldColor,!0),this.hpTextField.width=this.object.width/r,this.hpTextField.height=this.object.height/r,this.hpTextField.textAlign=egret.HorizontalAlign.CENTER,this.hpTextField.verticalAlign=egret.VerticalAlign.MIDDLE,this.object.addChild(this.hpTextField)},t.prototype.setRectShape=function(e,t,o,a,i,r){var n=new egret.Shape;this.addShapes.push(n),n.anchorOffsetX=this.object.anchorOffsetX,n.anchorOffsetY=this.object.anchorOffsetY,n.x=this.object.anchorOffsetX+e,n.y=this.object.anchorOffsetY+t,n.rotation=r||0,n.graphics.beginFill(i),n.graphics.drawRect(0,0,o,a),n.graphics.endFill(),this.object.addChildAt(n,0)},t.prototype.setCircleShape=function(e,t,o,a,i){0>=o&&(o=1,console.log("radiusが0以下です"));var r=new egret.Shape;this.addShapes.push(r),r.x=this.object.anchorOffsetX+e,r.y=this.object.anchorOffsetY+t,r.rotation=i||0,r.graphics.beginFill(a),r.graphics.drawCircle(0,0,o),r.graphics.endFill(),this.object.addChildAt(r,0)},t.prototype.updateContent=function(){this.hpTextField.text=this.hp.toString(),this.initialY>this.object.y&&(this.object.y=this.initialY)},t.prototype.addDestroyMethod=function(){var e=this;this.addShapes.forEach(function(t){e.object.removeChild(t),t=null}),this.object.removeChild(this.hpTextField)},t.prototype["delete"]=function(){this.addDestroyMethod(),this.shape&&GameObject.display.removeChild(this.object)},t}(GameObject);__reflect(Enemy.prototype,"Enemy");var RectEnemy=function(e){function t(t,o,a,i,r,n,s){var l=e.call(this,t,o,a,i,r,n,s)||this;return l.setRectShape(0,0,a,i,r,45),l}return __extends(t,e),t}(Enemy);__reflect(RectEnemy.prototype,"RectEnemy");var CircleEnemy=function(e){function t(t,o,a,i,r,n,s,l){var h=e.call(this,t,o,a,i,n,s,l)||this;return h.setCircleShape(0,0,r,n),h}return __extends(t,e),t}(Enemy);__reflect(CircleEnemy.prototype,"CircleEnemy");var DoubleCircle=function(e){function t(t,o,a,i,r,n,s,l){var h=e.call(this,t,o,a,i,n,s,l)||this;return h.setCircleShape(-r/1.5,0,r,n),h.setCircleShape(r/1.5,0,r,n),h}return __extends(t,e),t}(Enemy);__reflect(DoubleCircle.prototype,"DoubleCircle");var DoubleRect=function(e){function t(t,o,a,i,r,n,s){var l=e.call(this,t,o,a,i,r,n,s)||this;return l.setRectShape(-a/4,-i/4,a,i,r),l.setRectShape(a/4,i/4,a,i,r),l}return __extends(t,e),t}(Enemy);__reflect(DoubleRect.prototype,"DoubleRect");var TripleCircle=function(e){function t(t,o,a,i,r,n,s,l){var h=e.call(this,t,o,a,i,n,s,l)||this,c=r/1;return h.setCircleShape(0,c,r,n),h.setCircleShape(c,0,r/1.5,n),h.setCircleShape(-c,0,r/1.5,n),h}return __extends(t,e),t}(Enemy);__reflect(TripleCircle.prototype,"TripleCircle");var TripleRect=function(e){function t(t,o,a,i,r,n,s){var l=e.call(this,t,o,a,i,r,n,s)||this,h=1.35*a,c=1.35*i;return l.setRectShape(0,0,a,i,r,45),l.setRectShape(-h,c,a,i,r,45),l.setRectShape(h,c,a,i,r,45),l}return __extends(t,e),t}(Enemy);__reflect(TripleRect.prototype,"TripleRect");var Umibouzu=function(e){function t(t,o,a,i,r,n,s,l){var h=e.call(this,t,o,a,i,n,s,l)||this,c=1.5*r,p=Util.color(255,0,0);return h.setCircleShape(c,c,r/1.5,p),h.setCircleShape(-c,c,r/1.5,p),h.setCircleShape(0,2*c,r/1.5,p),h.setCircleShape(0,0,4*r,n),h}return __extends(t,e),t}(Enemy);__reflect(Umibouzu.prototype,"Umibouzu");var Ball=function(e){function t(t,o,a){var i=e.call(this)||this;return i.radius=null,i.setShape(t,o,a),i}return __extends(t,e),t.prototype.setShape=function(e,t,o){this.shape&&GameObject.display.removeChild(this.shape),this.shape=new egret.Shape,this.shape.x=e,this.shape.y=t,this.shape.graphics.beginFill(16711680),this.shape.graphics.drawCircle(0,0,o),this.shape.graphics.endFill(),GameObject.display.addChild(this.shape)},t.prototype.updateContent=function(){},t.I=null,t}(GameObject);__reflect(Ball.prototype,"Ball");var PhysicsBall=function(e){function t(t,o,a){var i=e.call(this)||this;return i.radius=null,i.setBody(t,o,a),i.setShape(t,o,a),i}return __extends(t,e),t.prototype.setBody=function(e,t,o){this.body=new p2.Body({mass:1,position:[e,t]}),this.bodyShape=new p2.Circle({radius:o,fixedRotation:!0}),this.body.addShape(this.bodyShape),CreateWorld.world.addBody(this.body)},t.prototype.setShape=function(e,t,o){this.shape&&GameObject.display.removeChild(this.shape),this.shape=new egret.Shape,this.shape.x=e,this.shape.y=t,this.shape.graphics.beginFill(16711680),this.shape.graphics.drawCircle(0,0,o),this.shape.graphics.endFill(),GameObject.display.addChild(this.shape)},t}(PhysicsObject);__reflect(PhysicsBall.prototype,"PhysicsBall");var MyBall=function(e){function t(t,o,a){var i=e.call(this,t,o,a)||this;return Ball.I=i,i}return __extends(t,e),t}(Ball);__reflect(MyBall.prototype,"MyBall");var GameOver=function(e){function t(){var t=e.call(this)||this;return t.textGameOver=null,t.textScore=null,t.textColor=65339,t.textGameOver=Util.myText(Game.width/2,Game.height/2-50,"GAME OVER",100,.5,t.textColor,!0),t.textGameOver.anchorOffsetX=t.textGameOver.width/2,t.textGameOver.anchorOffsetY=t.textGameOver.height/2,GameObject.display.addChild(t.textGameOver),t.textScore=Util.myText(Game.width/2,Game.height/2+50,"SCORE : "+Score.I.score,100,.5,t.textColor,!0),t.textScore.anchorOffsetX=t.textScore.width/2,t.textScore.anchorOffsetY=t.textScore.height/2,GameObject.display.addChild(t.textScore),Score.I.score>=Score.I.bestScore&&window.localStorage.setItem("bestScore",Score.I.score.toFixed()),GameObject.display.once(egret.TouchEvent.TOUCH_TAP,function(e){return t.tap(e)},t),t}return __extends(t,e),t.prototype.onDestroy=function(){GameObject.display.removeChild(this.textGameOver),this.textGameOver=null,GameObject.display.removeChild(this.textScore),this.textScore=null},t.prototype.updateContent=function(){GameObject.display.addChild(this.textGameOver),GameObject.display.addChild(this.textScore)},t.prototype.tap=function(e){GameObject.transit=Game.init,this.destroy()},t}(GameObject);__reflect(GameOver.prototype,"GameOver");var RandomEnemy;!function(e){e[e.RECT=0]="RECT",e[e.CIRCLE=1]="CIRCLE",e[e.DOUBLE_RECT=2]="DOUBLE_RECT",e[e.DOUBLE_CIRCLE=3]="DOUBLE_CIRCLE",e[e.TRIPLE_RECT=4]="TRIPLE_RECT",e[e.TRIPLE_CIRCLE=5]="TRIPLE_CIRCLE",e[e.BOSS_RECT=6]="BOSS_RECT",e[e.BOSS_CIRCLE=7]="BOSS_CIRCLE",e[e.BOSS_DOUBLE_RECT=8]="BOSS_DOUBLE_RECT",e[e.BOSS_DOUBLE_CIRCLE=9]="BOSS_DOUBLE_CIRCLE",e[e.BOSS_TRIPLE_RECT=10]="BOSS_TRIPLE_RECT",e[e.BOSS_TRIPLE_CIRCLE=11]="BOSS_TRIPLE_CIRCLE",e[e.BOSS_Umibouzu=12]="BOSS_Umibouzu"}(RandomEnemy||(RandomEnemy={}));var GameScene=function(e){function t(){var o=e.call(this)||this;return t.I=o,o.createStage(),o}return __extends(t,e),t.prototype.createStage=function(){t.createEnemy()},t.createEnemy=function(){var e,o=Util.randomInt(RandomEnemy.RECT,RandomEnemy.BOSS_Umibouzu),a=Game.width/6,i=a,r=a;switch(Kill.I.kill){case 10:o=RandomEnemy.BOSS_RECT;break;case 50:o=RandomEnemy.BOSS_CIRCLE;break;case 100:o=RandomEnemy.BOSS_DOUBLE_RECT;break;case 200:o=RandomEnemy.BOSS_DOUBLE_CIRCLE;break;case 300:o=RandomEnemy.BOSS_TRIPLE_RECT;break;case 400:o=RandomEnemy.BOSS_TRIPLE_CIRCLE;break;case 500:o=RandomEnemy.BOSS_Umibouzu;break;case 600:break;case 700:break;case 800:break;case 800:break;case 900:break;case 1e3:}switch(o){case RandomEnemy.RECT:e=new RectEnemy(Game.width/2,Game.height/4,Game.width/6,Game.height/8,Util.color(0,0,255),10,50),t.enemy.push(e);break;case RandomEnemy.CIRCLE:a=Game.width/8,i=a,r=a,e=new CircleEnemy(Game.width/2,Game.height/4,i,r,a,Util.color(0,0,255),10,50),t.enemy.push(e);break;case RandomEnemy.DOUBLE_RECT:e=new DoubleRect(Game.width/2,Game.height/4,Game.width/6,Game.height/8,Util.color(10,130,180),50,200),t.enemy.push(e);break;case RandomEnemy.DOUBLE_CIRCLE:a=Game.width/8,i=a,r=a,e=new DoubleCircle(Game.width/2,Game.height/4,i,r,a,Util.color(0,150,55),50,200),t.enemy.push(e);break;case RandomEnemy.TRIPLE_RECT:e=new TripleRect(Game.width/2,Game.height/4,Game.width/6,Game.height/8,Util.color(10,130,180),200,3e3),t.enemy.push(e);break;case RandomEnemy.TRIPLE_CIRCLE:a=Game.width/8,i=a,r=a,e=new TripleCircle(Game.width/2,Game.height/4,i,r,a,Util.color(0,50,55),200,3e3),t.enemy.push(e);break;case RandomEnemy.BOSS_RECT:e=new RectEnemy(Game.width/2,Game.height/4,Game.width/3.6,Game.height/5.2,Util.color(255,255,0),100,1e3),t.enemy.push(e);break;case RandomEnemy.BOSS_CIRCLE:a=Game.width/5,i=a,r=a,e=new CircleEnemy(Game.width/2,Game.height/4,i,r,a,Util.color(255,255,0),300,2e3),t.enemy.push(e);break;case RandomEnemy.BOSS_DOUBLE_RECT:e=new DoubleRect(Game.width/2,Game.height/4,Game.width/6,Game.height/8,Util.color(255,255,0),500,1e3),t.enemy.push(e);break;case RandomEnemy.BOSS_DOUBLE_CIRCLE:a=Game.width/8,i=a,r=a,e=new DoubleCircle(Game.width/2,Game.height/4,i,r,a,Util.color(255,255,0),500,1e3),t.enemy.push(e);break;case RandomEnemy.BOSS_TRIPLE_RECT:e=new TripleRect(Game.width/2,Game.height/4,Game.width/6,Game.height/8,Util.color(255,255,0),2e3,8e3),t.enemy.push(e);break;case RandomEnemy.BOSS_TRIPLE_CIRCLE:a=Game.width/8,i=a,r=a,e=new TripleCircle(Game.width/2,Game.height/4,i,r,a,Util.color(255,255,0),2e3,8e3),t.enemy.push(e);break;case RandomEnemy.BOSS_Umibouzu:a=Game.width/8,i=a,r=a,e=new Umibouzu(Game.width/2,Game.height/4,i,r,a,Util.color(255,255,0),1e4,15e3),t.enemy.push(e)}},t.prototype.addDestroyMethod=function(){},t.prototype.updateContent=function(){},t.I=null,t.enemy=[],t}(GameObject);__reflect(GameScene.prototype,"GameScene");var Box=function(e){function t(t,o,a,i,r){var n=e.call(this)||this;return n.setShape(t,o,a,i,r),n}return __extends(t,e),t.prototype.setShape=function(e,t,o,a,i){this.shape&&GameObject.display.removeChild(this.shape),this.shape=new egret.Shape,this.shape.anchorOffsetX+=o/2,this.shape.anchorOffsetY+=a/2,this.shape.x=e,this.shape.y=t,this.shape.graphics.beginFill(i),this.shape.graphics.drawRect(0,0,o,a),this.shape.graphics.endFill(),GameObject.display.addChild(this.shape)},t}(GameObject);__reflect(Box.prototype,"Box");var PhysicsBox=function(e){function t(t,o,a,i,r){var n=e.call(this)||this;return n.x=t,n.y=o,n.width=a,n.height=i,n.color=r,n.setShape(n.width,n.height),n}return __extends(t,e),t.prototype.setBody=function(e,t,o,a){this.body=new p2.Body({mass:1,position:[e,t],type:p2.Body.STATIC}),this.bodyShape=new p2.Box({width:o,height:a}),this.body.addShape(this.bodyShape),CreateWorld.world.addBody(this.body)},t.prototype.setShape=function(e,t){this.shape&&GameObject.display.removeChild(this.shape),this.shape=new egret.Shape,this.shape.anchorOffsetX+=e/2,this.shape.anchorOffsetY+=t/2,this.shape.x=this.body.position[0],this.shape.y=this.body.position[1],this.shape.graphics.beginFill(this.color),this.shape.graphics.drawRect(0,0,e,t),this.shape.graphics.endFill(),GameObject.display.addChild(this.shape)},t}(PhysicsObject);__reflect(PhysicsBox.prototype,"PhysicsBox");var MyBox=function(e){function t(t,o,a,i,r){return e.call(this,t,o,a,i,r)||this}return __extends(t,e),t.prototype.updateContent=function(){},t}(Box);__reflect(MyBox.prototype,"MyBox");var Player=function(e){function t(o,a,i,r,n){var s=e.call(this)||this;return t.I=s,s.setPlayerObject(o,a,i,r),s.setShape(o,a,i,r,n),s.loadStatus(),t.object.scaleX=t.object.scaleY=.4,t.shotTimer=new egret.Timer(t.shotInterval,0),t.shotTimer.addEventListener(egret.TimerEvent.TIMER,s.shot,s),t.shotTimer.start(),GameObject.display.addEventListener(egret.TouchEvent.TOUCH_BEGIN,s.shot,s),s}return __extends(t,e),t.prototype.loadStatus=function(){t.bulletDamage=Util.loadLocalStrage("Player.bulletDamage",t.bulletDamage),t.bulletMoveSpeed=Util.loadLocalStrage("Player.bulletMoveSpeed",t.bulletMoveSpeed),t.salary=Util.loadLocalStrage("Player.salary",t.salary),t.shotInterval=Util.loadLocalStrage("Player.shotInterval",t.shotInterval),t.damageLevelUpCost=Util.loadLocalStrage("Player.damageLevelUpCost",t.damageLevelUpCost),t.speedLevelUpCost=Util.loadLocalStrage("Player.speedLevelUpCost",t.speedLevelUpCost),t.salaryLevelUpCost=Util.loadLocalStrage("Player.salaryLevelUpCost",t.salaryLevelUpCost)},t.prototype.setPlayerObject=function(e,o,a,i){t.object=new egret.DisplayObjectContainer,t.object.anchorOffsetX+=a/2,t.object.x=e,t.object.y=o,t.object.width=a,t.object.height=i,GameObject.display.addChild(t.object)},t.prototype.setShape=function(e,o,a,i,r){this.shape&&GameObject.display.removeChild(this.shape),this.shape=new egret.Shape,this.shape.x=0,this.shape.y=0,this.shape.graphics.beginFill(r),this.shape.graphics.drawRect(0,0,a,i),this.shape.graphics.endFill();var n=this.setMask(this.shape.x,this.shape.y,this.shape.width/3,this.shape.height/2,Util.color(0,0,0)),s=this.setMask(this.shape.x+2*this.shape.width/3,this.shape.y,this.shape.width/3,this.shape.height/2,Util.color(0,0,0));t.object.addChild(this.shape),t.object.addChild(n),t.object.addChild(s)},t.prototype.setMask=function(e,t,o,a,i){var r=new egret.Shape;return r.x=e,r.y=t,r.graphics.beginFill(i),r.graphics.drawRect(0,0,o,a),r.graphics.endFill(),r},t.prototype.shot=function(){var e=new Bullet(Game.width/2,Game.height/1.6,Game.width/24,Game.height/16,Util.color(255,255,0));t.bullet.push(e)},t.prototype.resetTimer=function(){t.shotTimer.stop(),t.shotTimer.removeEventListener(egret.TimerEvent.TIMER,this.shot,this),t.shotTimer=new egret.Timer(t.shotInterval,0),t.shotTimer.addEventListener(egret.TimerEvent.TIMER,this.shot,this),t.shotTimer.start()},t.prototype.addDestroyMethod=function(){GameObject.display.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.shot,this)},t.prototype.updateContent=function(){t.bullet.forEach(function(e){e.object.y-=t.bulletMoveSpeed,e.object.y<0&&e.destroy(),GameScene.enemy.forEach(function(o){0==e.collisionFlag&&0==o.deadFlag&&o.object.y>=e.object.y&&e.object.y>=0&&(o.hp-=t.bulletDamage,MyTween.knockBack(o.object),e.destroy(),e.collisionFlag=!0,o.hp<=0&&(o.hp=0,o.deadFlag=!0,Money.addMoney(o.dropMoney),new DropMoney(0,0,"MONEY\n+"+o.dropMoney.toString(),70,.5,16711680,!0,o.object),MyTween.enemyFadeOut(o.object,o),Kill.I.addKill()))})})},t.I=null,t.object=null,t.shotTimer=null,t.shotInterval=1e3,t.bullet=[],t.bulletDamage=1,t.bulletMoveSpeed=5,t.salary=1,t.damageLevelUpCost=100,t.speedLevelUpCost=100,t.salaryLevelUpCost=100,t}(GameObject);__reflect(Player.prototype,"Player");var MyTween=function(){function e(){}return e.fadeOut=function(e,t){void 0==t&&(t=null),egret.Tween.get(e).to({alpha:.5},1e3).call(function(){egret.Tween.removeTweens(e),(void 0!=t||null!=t)&&t.destroy()})},e.enemyFadeOut=function(e,t){void 0==t&&(t=null),egret.Tween.get(e).to({alpha:.2},1e3).call(function(){egret.Tween.removeTweens(e),(void 0!=t||null!=t)&&(t.destroy(),GameScene.createEnemy())})},e.knockBack=function(e){var t=e.y;egret.Tween.get(e).to({y:t-50},50,egret.Ease.elasticIn).to({y:t},50,egret.Ease.sineIn)},e.dropMoneyTextFadeOut=function(e,t){void 0==t&&(t=null);var o=e.y;egret.Tween.get(e).to({y:o-100},100).to({alpha:.2},900).call(function(){egret.Tween.removeTweens(e),(void 0!=t||null!=t)&&t.destroy()})},e.enemyRotate=function(e,t){e.y;egret.Tween.get(e,{loop:!0}).to({rotation:360},t)},e.autoSaveTextFadeInOut=function(e,t){void 0==t&&(t=null),e.alpha=0,egret.Tween.get(e).to({alpha:1},10).wait(2e3).to({alpha:0},2e3).call(function(){egret.Tween.removeTweens(e)})},e}();__reflect(MyTween.prototype,"MyTween");var Util=function(){function e(){}return e.init=function(e){this.height=e.stage.stageHeight,this.width=e.stage.stageWidth,this.ui=e},e.random=function(e,t){return e+Math.random()*(t-e)},e.randomInt=function(e,t){return Math.floor(e+Math.random()*(t+.999-e))},e.clamp=function(e,t,o){return t>e&&(e=t),e>o&&(e=o),e},e.color=function(e,t,o){var a=e.toFixed(0),i=t.toFixed(0),r=o.toFixed(0);a=e.toString(16),i=t.toString(16),r=o.toString(16),a=("00"+a).slice(-2),i=("00"+i).slice(-2),r=("00"+r).slice(-2);var n=parseInt("0x"+a+i+r,16);return n},e.myText=function(e,t,o,a,i,r,n){var s=new egret.TextField;return s.x=e,s.y=t,s.text=o,s.bold=n,s.size=a,s.scaleX=i,s.scaleY=i,s.textColor=r,s.multiline=!0,s},e.myStrokeText=function(e,t,o,a,i,r,n,s,l){var h=new egret.TextField;return h.x=e,h.y=t,h.scaleX=i,h.scaleY=i,h.textFlow=[{text:o,style:{textColor:r,size:a,fontFamily:n,strokeColor:s,stroke:l}}],h},e.savelocalStrage=function(e,t){window.localStorage.setItem(e,t.toString())},e.loadLocalStrage=function(e,t){var o=window.localStorage.getItem(e);null==o&&(o=t.toString(),window.localStorage.setItem(e,o.toString()));var a=parseInt(o);return a},e}();__reflect(Util.prototype,"Util");var Button=function(e){function t(t,o,a,i,r){var n=e.call(this)||this;return n.object=null,n.indexText=null,n.indexTextColor=16777215,n.costText=null,n.costTextColor=16777215,n.parameterText=null,n.parameterTextColor=16777215,n.setObject(t,o,a,i),n.object.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.tap,n),n}return __extends(t,e),t.prototype.setObject=function(e,t,o,a){0>=o?(o=1,console.log("widthが0以下です")):0>=a&&(a=1,console.log("heightが0以下です")),this.object=new egret.DisplayObjectContainer,this.object.width=o,this.object.height=a,this.object.anchorOffsetX+=o/2,this.object.anchorOffsetY+=a/2,this.object.x=e,this.object.y=t,this.object.touchEnabled=!0,GameObject.display.addChild(this.object)},t.prototype.setIndexText=function(e,t,o,a,i){var r=80,n=.5;this.indexText=Util.myText(e,t,i,r,n,this.indexTextColor,!0),this.indexText.width=this.object.width/n,this.indexText.height=this.object.height/n,this.indexText.textAlign=egret.HorizontalAlign.CENTER,this.object.addChild(this.indexText)},t.prototype.setParameterText=function(e,t,o,a,i){var r=60,n=.5;this.parameterText=Util.myText(e,t,i.toString(),r,n,this.parameterTextColor,!1),this.parameterText.width=this.object.width/n,this.parameterText.height=this.object.height/n,this.parameterText.textAlign=egret.HorizontalAlign.CENTER,this.object.addChild(this.parameterText)},t.prototype.setCostText=function(e,t,o,a,i){var r=60,n=.5;this.costText=Util.myText(e,t,"Lv.UP\n MONEY\n"+i.toString(),r,n,this.costTextColor,!1),this.costText.width=this.object.width/n,this.costText.height=this.object.height/n,this.costText.textAlign=egret.HorizontalAlign.CENTER,this.costText.verticalAlign=egret.VerticalAlign.MIDDLE,this.object.addChild(this.costText)},t.prototype["delete"]=function(){this.shape&&GameObject.display.removeChild(this.object),this.object.hasEventListener&&this.object.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.tap,this)},t}(GameObject);__reflect(Button.prototype,"Button");var LevelUpBulletDamageButton=function(e){function t(t,o,a,i,r,n){var s=e.call(this,t,o,a,i,n)||this;return s.setShape(t,o,a,i,r),s.setIndexText(0,-100,a,i,n),s.setParameterText(0,-50,a,i,Player.bulletDamage),s.setCostText(0,0,a,i,Player.damageLevelUpCost),s}return __extends(t,e),t.prototype.setShape=function(e,t,o,a,i){this.shape&&GameObject.display.removeChild(this.shape),this.shape=new egret.Shape,this.shape.x=0,this.shape.y=0,this.shape.graphics.beginFill(i),this.shape.graphics.drawRoundRect(0,0,o,a,30),this.shape.graphics.endFill(),this.object.addChild(this.shape)},t.prototype.updateContent=function(){this.parameterText.text=Player.bulletDamage.toString(),this.costText.text="Lv.UP\n MONEY\n"+Player.damageLevelUpCost.toString()},t.prototype.tap=function(){Money.I.money>=Player.damageLevelUpCost&&(Money.I.money-=Player.damageLevelUpCost,Player.bulletDamage+=1,Player.damageLevelUpCost+=100,Util.savelocalStrage("Player.bulletDamage",Player.bulletDamage),Util.savelocalStrage("Player.damageLevelUpCost",Player.damageLevelUpCost))},t}(Button);__reflect(LevelUpBulletDamageButton.prototype,"LevelUpBulletDamageButton");var LevelUpBulletSpeedButton=function(e){function t(t,o,a,i,r,n){var s=e.call(this,t,o,a,i,n)||this;return s.setShape(t,o,a,i,r),s.setIndexText(0,-100,a,i,n),s.setParameterText(0,-50,a,i,Player.bulletMoveSpeed),s.setCostText(0,0,a,i,Player.speedLevelUpCost),s}return __extends(t,e),t.prototype.setShape=function(e,t,o,a,i){this.shape&&GameObject.display.removeChild(this.shape),this.shape=new egret.Shape,this.shape.x=0,this.shape.y=0,this.shape.graphics.beginFill(i),this.shape.graphics.drawRoundRect(0,0,o,a,30),this.shape.graphics.endFill(),this.object.addChild(this.shape)},t.prototype.updateContent=function(){this.parameterText.text=Player.bulletMoveSpeed.toString(),this.costText.text="Lv.UP\n MONEY\n"+Player.speedLevelUpCost.toString()},t.prototype.tap=function(){Money.I.money>=Player.speedLevelUpCost&&(Money.I.money-=Player.speedLevelUpCost,Player.bulletMoveSpeed+=1,Player.speedLevelUpCost+=100,Player.shotInterval>=100&&(Player.shotInterval=1e3-5*Player.bulletMoveSpeed,Player.shotInterval<100&&(Player.shotInterval=100)),Player.I.resetTimer(),Util.savelocalStrage("Player.bulletMoveSpeed",Player.bulletMoveSpeed),Util.savelocalStrage("Player.speedLevelUpCost",Player.speedLevelUpCost),Util.savelocalStrage("Player.shotInterval",Player.shotInterval))},t}(Button);__reflect(LevelUpBulletSpeedButton.prototype,"LevelUpBulletSpeedButton");var LevelUpSalaryButton=function(e){function t(t,o,a,i,r,n){var s=e.call(this,t,o,a,i,n)||this;return s.setShape(t,o,a,i,r),s.setIndexText(0,-100,a,i,n),s.setParameterText(0,-50,a,i,Player.bulletMoveSpeed),s.setCostText(0,0,a,i,Player.speedLevelUpCost),s}return __extends(t,e),t.prototype.setShape=function(e,t,o,a,i){this.shape&&GameObject.display.removeChild(this.shape),this.shape=new egret.Shape,this.shape.x=0,this.shape.y=0,this.shape.graphics.beginFill(i),this.shape.graphics.drawRoundRect(0,0,o,a,30),this.shape.graphics.endFill(),this.object.addChild(this.shape)},t.prototype.updateContent=function(){this.parameterText.text=Player.salary.toString()+"/sec",this.costText.text="Lv.UP\n MONEY\n"+Player.salaryLevelUpCost.toString()},t.prototype.tap=function(){Money.I.money>=Player.salaryLevelUpCost&&(Money.I.money-=Player.salaryLevelUpCost,Player.salary+=1,Player.salaryLevelUpCost+=100,Util.savelocalStrage("Player.salary",Player.salary),Util.savelocalStrage("Player.salaryLevelUpCost",Player.salaryLevelUpCost))},t}(Button);__reflect(LevelUpSalaryButton.prototype,"LevelUpSalaryButton");var Kill=function(e){function t(){var o=e.call(this)||this;return o.kill=0,o.text=null,o.textColor=65339,t.I=o,o.textColor=Util.color(0,255,0),o.kill=Util.loadLocalStrage("kill",o.kill),o.text=Util.myText(0,50,"KILL : "+o.kill.toString()+" / 1000",100,.5,o.textColor,!0),GameObject.display.addChild(o.text),o}return __extends(t,e),t.prototype.onDestroy=function(){GameObject.display.removeChild(this.text),this.text=null},t.prototype.updateContent=function(){this.text.text="KILL : "+this.kill.toString()+" / 1000"},t.prototype.addKill=function(){this.kill+=1,window.localStorage.setItem("kill",this.kill.toString())},t.I=null,t}(GameObject);__reflect(Kill.prototype,"Kill");var Money=function(e){function t(){var o=e.call(this)||this;o.money=0,o.bestMoney=0,o.text=null,o.textBest=null,o.textColor=65339,o.textColor=Util.color(0,255,0),t.I=o;var a=window.localStorage.getItem("money");return null==a&&(a="0",window.localStorage.setItem("money",a)),o.money=parseInt(a),o.text=Util.myText(0,0,"MONEY : 0",100,.5,o.textColor,!0),GameObject.display.addChild(o.text),o}return __extends(t,e),t.prototype.onDestroy=function(){GameObject.display.removeChild(this.text),this.text=null},t.prototype.updateContent=function(){this.text.text="MONEY : "+this.money.toFixed()},t.addMoney=function(e){t.I.money+=e,window.localStorage.setItem("money",t.I.money.toString())},t.I=null,t}(GameObject);__reflect(Money.prototype,"Money");var DropMoney=function(e){function t(t,o,a,i,r,n,s,l){var h=e.call(this)||this;return h.text=null,h.textColor=65339,h.textColor=Util.color(0,255,0),h.display=l,h.text=Util.myText(t,o,a,i,r,n,!0),h.text.width=l.width/r,h.text.height=l.height/r,h.text.textAlign=egret.HorizontalAlign.CENTER,h.text.verticalAlign=egret.VerticalAlign.MIDDLE,l.addChild(h.text),MyTween.dropMoneyTextFadeOut(h.text,h),h}return __extends(t,e),t.prototype.addDestroyMethod=function(){this.display.removeChild(this.text)},t.prototype.updateContent=function(){},t}(GameObject);__reflect(DropMoney.prototype,"DropMoney");var Score=function(e){function t(){var o=e.call(this)||this;o.score=0,o.bestScore=0,o.text=null,o.textBest=null,o.textColor=65339,o.textColor=Util.color(0,255,0),t.I=o,o.score=0,o.text=Util.myText(0,0,"SCORE : 0",100,.5,o.textColor,!0),GameObject.display.addChild(o.text);var a=window.localStorage.getItem("bestScore");return null==a&&(a="0",window.localStorage.setItem("bestScore",a)),o.bestScore=parseInt(a),o.textBest=Util.myText(0,50,"BEST : "+a,100,.5,o.textColor,!0),GameObject.display.addChild(o.textBest),o}return __extends(t,e),t.prototype.onDestroy=function(){GameObject.display.removeChild(this.text),this.text=null,GameObject.display.removeChild(this.textBest),this.textBest=null},t.prototype.updateContent=function(){this.text.text="SCORE : "+this.score.toFixed(),this.bestScore<this.score&&(this.bestScore=this.score,this.textBest.text="BEST : "+this.score.toFixed())},t.prototype.addScore=function(){this.score+=1},t.I=null,t}(GameObject);__reflect(Score.prototype,"Score");